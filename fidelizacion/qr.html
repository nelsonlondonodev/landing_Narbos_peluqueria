<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro Club Narbo's | Código QR</title>
    <!-- Privacidad: Uso exclusivo en salón -->
    <meta name="robots" content="noindex, nofollow">
    
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="icon" type="image/webp" href="../images/brand/favicon_narbos.webp" />
    
    <!-- Fuentes de Google -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet" />
    
    <!-- Animaciones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <style>
        .qr-container {
            background: white;
            padding: 2rem;
            border-radius: 2rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
        }
        .qr-frame {
            border: 8px solid #6B755A; /* brand-green color from current project */
            border-radius: 1.5rem;
            padding: 1rem;
        }
    </style>
</head>
<body class="bg-brand-light/10 font-sans min-h-screen flex flex-col items-center justify-center p-4">

    <!-- Header / Logo -->
    <div class="mb-8 animate__animated animate__fadeInDown">
        <img src="../images/brand/logo_narbos.webp" alt="Logo Narbo's" class="h-16 w-auto" width="280" height="56">
    </div>

    <!-- Main QR Card -->
    <main class="w-full max-w-md text-center">
        <div class="qr-container animate__animated animate__zoomIn">
            <h1 class="text-3xl font-serif font-bold text-brand-gray-dark mb-2">Únete al Club</h1>
            <p class="text-brand-gray-dark/60 mb-8 font-medium">Escanea este código para registrarte y recibir tus beneficios.</p>
            
            <div class="qr-frame inline-block mb-8 bg-white">
                <img id="qr-image" 
                     src="" 
                     alt="Código QR de Registro" 
                     class="w-64 h-64 md:w-80 md:h-80"
                     loading="eager">
            </div>

            <div class="space-y-2">
                <p class="text-brand-green font-bold text-lg tracking-widest uppercase">¡Beneficios Exclusivos!</p>
                <div class="flex justify-center gap-4 text-brand-gray-dark/40">
                    <span class="text-xs">✨ Descuentos</span>
                    <span class="text-xs">✨ Sorpresas</span>
                    <span class="text-xs">✨ Puntos</span>
                </div>
            </div>
        </div>
        
        <!-- Botón de retorno discreto -->
        <a href="./" class="mt-8 inline-block text-brand-gray-dark/30 hover:text-brand-green transition-colors text-sm font-medium">
            &larr; Ir al Formulario
        </a>
    </main>

    <footer class="mt-12 text-brand-gray-dark/40 text-xs">
        &copy; 2026 Narbo's Salón Spa
    </footer>

    <script type="module">
        /**
         * Genera el QR dinámicamente basado en la URL de la página de registro.
         * Esto asegura que funcione en localhost, stagging y producción sin cambios manuales.
         */
        function initQRGenerator() {
            const qrImage = document.getElementById('qr-image');
            
            // Forzamos la URL de producción para que sea escaneable desde cualquier móvil
            // incluso si estamos probando en local.
            const productionUrl = 'https://narbossalon.com/fidelizacion/';
            
            // Codificamos la URL para el API de QR
            const encodedUrl = encodeURIComponent(productionUrl);
            const qrApiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=500x500&color=2D2D2D&format=svg&data=${encodedUrl}`;
            
            qrImage.src = qrApiUrl;
            
            console.log(`[QR Generator] URL apuntando a: ${productionUrl}`);
        }

        document.addEventListener('DOMContentLoaded', initQRGenerator);
    </script>
</body>
</html>
