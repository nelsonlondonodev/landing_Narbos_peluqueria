import{App}from"./App.e47d2333.js?v=1769842252205";import{ServiceCard}from"./components/ServiceCard.js";import{Breadcrumbs}from"./components/Breadcrumbs.js";import{getBentoGridHTML}from"./components/BentoGrid.js";import{pagesData}from"./data/pagesData.js";import{FloatingDecorations}from"./components/FloatingDecorations.js";import{BrandsSection}from"./components/BrandsSection.js";import{hairBrands}from"./data/brandsData.js";import{hairSalonServices}from"./data/hairSalonServices.js";import{barberServices}from"./data/barberServices.js";import{hairCutStyles}from"./data/hairCutStyles.js";import{colorStyles}from"./data/colorStyles.js";import{tintStyles}from"./data/tintStyles.js";import{treatmentStyles}from"./data/treatmentStyles.js";import{estheticsServices}from"./data/estheticsServices.js";class ServicePageManager{constructor(){this.app=null,this.pageKey=null,this.init()}init(){this.initApp(),this.pageKey=this.getPageKey(),this.initHero(),this.initFloatingDecorations(),this.initServiceGrid(),this.initBrands(),this.initBentoGallery(),this.initLazyVideos(),this.initModalTriggers(),this.initBreadcrumbs(),this.initLightboxInstance()}initApp(){window.narbosApp?this.app=window.narbosApp:(this.app=new App,this.app.init(),window.narbosApp=this.app)}getPageKey(){const e=window.location.pathname;return e.includes("cortes-de-pelo")?"cortes-de-pelo":e.includes("balayage-mechas")?"balayage-mechas":e.includes("color-tinturas-cabello")?"color-tinturas-cabello":e.includes("tratamientos-capilares")?"tratamientos-capilares":e.includes("limpieza-facial")?"limpieza-facial":e.includes("masajes-relajantes")?"masajes-relajantes":e.includes("spa-facial-integral")?"spa-facial-integral":e.includes("cejas-y-pestanas")?"cejas-y-pestanas":e.includes("/estetica")?"estetica":e.includes("barberia-cortes-hombre")?"barberia-cortes-hombre":e.includes("barberia")?"barberia":e.includes("unas-spa")?"unas-spa":e.includes("nosotros")?"nosotros":e.includes("contacto")?"contacto":e.includes("peluqueria")||e.includes("index.html")?"peluqueria":null}initHero(){const e=document.getElementById("hero-root");if(!e||!this.pageKey)return;const t=pagesData[this.pageKey];if(!t||!t.hero)return;const{hero:a}=t,i=this.app.resolvePath(a.imageSrc);e.innerHTML=`\n            <div class="relative">\n                <section id="inicio" class="relative h-[60vh] md:h-[80vh] bg-white">\n                    <img src="${i}" alt="${a.imageAlt}" class="w-[85%] h-full object-cover absolute inset-0 z-0 mx-auto rounded-b-xl" loading="eager" width="1920" height="1080">\n                </section>\n\n                <div class="absolute z-20 top-[50vh] md:top-[65vh] left-0 right-0 px-6 pointer-events-none">\n                    <div class="container mx-auto">\n                        <div class="bg-white/90 backdrop-blur-md p-6 md:p-8 rounded-lg shadow-xl max-w-4xl mx-auto text-center border border-gray-100 pointer-events-auto">\n                            <h1 class="text-3xl md:text-5xl font-serif font-bold text-gray-900 mb-4">${a.title}</h1>\n                            <p class="text-lg md:text-xl text-gray-700 max-w-2xl mx-auto">${a.subtitle}</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `}initBentoGallery(){const e=document.getElementById("bento-gallery-root");if(!e||!this.pageKey)return;const t=pagesData[this.pageKey];if(!t||!t.gallery)return;const a=t.gallery.map(e=>({...e,src:this.app.resolvePath(e.src),poster:e.poster?this.app.resolvePath(e.poster):void 0})),i=t.galleryOptions||{};e.innerHTML=getBentoGridHTML(a,i)}initBrands(){this.pageKey&&("peluqueria"===this.pageKey||this.pageKey.includes("cortes")||this.pageKey.includes("balayage")||this.pageKey.includes("color"))&&document.getElementById("hair-brands-root")&&new BrandsSection("hair-brands-root",hairBrands).render()}initModalTriggers(){const e=document.querySelectorAll(".js-open-beard-modal");if(e.length>0){let t;e.forEach(e=>{e.addEventListener("click",async e=>{if(e.preventDefault(),!t){const{ModalController:e}=await import("./controllers/ModalController.js");t=new e}t.openModal("beard-modal")})})}}initFloatingDecorations(){this.app&&setTimeout(()=>{new FloatingDecorations({basePath:this.app.appRoot})},50)}initServiceGrid(){this.initHairServices(),this.initBarberServices(),this.initEstheticsServices()}initHairServices(){const e=document.getElementById("hair-services-grid");if(!e)return;this.getServicesForCurrentPage().forEach(t=>{const a={...t,image:this.app.resolvePath(t.image),link:this.app.resolvePath(t.link)},i=new ServiceCard(a).render();this.setupHairServiceLightbox(i,a),e.appendChild(i),this.setupHairServiceGallery(e,a)})}getServicesForCurrentPage(){switch(this.pageKey){case"cortes-de-pelo":return hairCutStyles;case"balayage-mechas":return colorStyles;case"color-tinturas-cabello":return tintStyles;case"tratamientos-capilares":return treatmentStyles;default:return hairSalonServices}}initBarberServices(){const e=document.getElementById("barber-services-grid");e&&barberServices.forEach(t=>{const a={...t,image:this.app.resolvePath(t.image),link:this.app.resolvePath(t.link)},i=new ServiceCard(a).render();"#open-modal-beard"===t.link&&this.setupBeardModalTrigger(i),e.appendChild(i)})}initEstheticsServices(){const e=document.getElementById("esthetics-services-grid");e&&estheticsServices.forEach(t=>{const a={...t,image:this.app.resolvePath(t.image),link:this.app.resolvePath(t.link)},i=new ServiceCard(a);e.appendChild(i.render())})}setupBeardModalTrigger(e){let t;e.addEventListener("click",async e=>{if(e.preventDefault(),!t){const{ModalController:e}=await import("./controllers/ModalController.js");t=new e}t.openModal("beard-modal")})}setupHairServiceLightbox(e,t){if("A"!==e.tagName||!this.pageKey)return;const a={"cortes-de-pelo":"gallery-","balayage-mechas":"gallery-color-","color-tinturas-cabello":"gallery-tint-","tratamientos-capilares":"gallery-treatment-"}[this.pageKey];if(!a)return;e.classList.add("glightbox");const i=a+t.title.replace(/\s+/g,"-").toLowerCase();e.setAttribute("data-gallery",i),e.setAttribute("data-title",t.title),e.setAttribute("data-description",t.description||"");const r=encodeURI(this.app.resolvePath(t.image));e.href="javascript:void(0);",e.setAttribute("data-href",r)}setupHairServiceGallery(e,t){if(!t.galleryImages||!Array.isArray(t.galleryImages)||0===t.galleryImages.length)return;if(!this.pageKey)return;const a=({"cortes-de-pelo":"gallery-","balayage-mechas":"gallery-color-","color-tinturas-cabello":"gallery-tint-","tratamientos-capilares":"gallery-treatment-"}[this.pageKey]||"gallery-default-")+t.title.replace(/\s+/g,"-").toLowerCase();t.galleryImages.forEach((i,r)=>{let s="string"==typeof i?i:i.src;const o="string"==typeof i?`${t.title} - Imagen ${r+2}`:i.title,n=encodeURI(this.app.resolvePath(s)),l=document.createElement("a");l.href="javascript:void(0);",l.setAttribute("data-href",n),l.className="glightbox hidden",l.setAttribute("data-gallery",a),l.setAttribute("data-title",o),l.style.display="none",e.appendChild(l)})}initLightboxInstance(e=0){if(this.pageKey){if("undefined"==typeof GLightbox)return e>50?void console.warn("GLightbox failed to load."):void setTimeout(()=>this.initLightboxInstance(e+1),100);this.lightbox&&(this.lightbox.destroy(),this.lightbox=null);try{this.lightbox=GLightbox({selector:".glightbox",touchNavigation:!0,loop:!0,zoomable:!0,draggable:!0,openEffect:"zoom",closeEffect:"zoom",slideEffect:"slide"}),this.injectLightboxStyles()}catch(e){console.error("Error initializing GLightbox:",e)}this.setupLightboxAccessibility()}}injectLightboxStyles(){if(document.getElementById("glightbox-critical-styles"))return;const e=document.createElement("style");e.id="glightbox-critical-styles",e.innerHTML="\n            .glightbox-container { z-index: 99999 !important; }\n            .gbtn { z-index: 100000 !important; display: block !important; opacity: 1 !important; background-color: transparent; }\n            .gbtn svg { width: 30px !important; height: 30px !important; display: block !important; color: #fff !important; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.5)); }\n            .gprev, .gnext, .gclose { z-index: 100000 !important; background-color: rgba(0,0,0,0.3) !important; border-radius: 50%; display: flex !important; align-items: center; justify-content: center; }\n            .gprev, .gnext { width: 45px !important; height: 45px !important; }\n            .gclose { width: 40px !important; height: 40px !important; top: 15px !important; right: 15px !important; }\n        ",document.head.appendChild(e)}setupLightboxAccessibility(){const e=[document.getElementById("app-wrapper"),document.querySelector("header"),document.querySelector("footer")];this.lightbox&&(this.lightbox.on("open",()=>e.forEach(e=>e&&e.setAttribute("inert",""))),this.lightbox.on("close",()=>e.forEach(e=>e&&e.removeAttribute("inert"))))}initLazyVideos(){const e=document.querySelectorAll("video.lazy-video");if(0===e.length||!("IntersectionObserver"in window))return;const t=new IntersectionObserver((e,t)=>{e.forEach(e=>{e.isIntersecting&&(this.playVideo(e.target),t.unobserve(e.target))})},{rootMargin:"0px 0px 50px 0px"});e.forEach(e=>t.observe(e))}playVideo(e){e.querySelectorAll("source").forEach(e=>{e.dataset.src&&(e.src=e.dataset.src)}),e.load(),e.play().catch(e=>console.warn("Autoplay blocked:",e)),e.classList.remove("lazy-video")}initBreadcrumbs(){const e=document.getElementById("breadcrumbs-root");if(!e||!this.pageKey)return;const t=window.location.pathname,a=[{label:"Inicio",link:"../../index.html"}];t.includes("/peluqueria/")?this.addHairBreadcrumbs(a):t.includes("/barberia/")?this.addBarberBreadcrumbs(a):t.includes("/estetica/")?this.addEstheticsBreadcrumbs(a):t.includes("/unas-spa/")&&a.push({label:"Uñas",link:"../../servicios/unas-spa/index.html"}),e.innerHTML=new Breadcrumbs(a).render()}addHairBreadcrumbs(e){e.push({label:"Peluquería",link:"../../servicios/peluqueria/index.html"});const t={"cortes-de-pelo":"Cortes","balayage-mechas":"Balayage","color-tinturas-cabello":"Color","tratamientos-capilares":"Tratamientos"};this.pageKey&&t[this.pageKey]&&e.push({label:t[this.pageKey],link:"#"})}addBarberBreadcrumbs(e){e.push({label:"Barbería",link:"../../servicios/barberia/index.html"}),"barberia-cortes-hombre"===this.pageKey&&e.push({label:"Cortes de Hombre",link:"#"})}addEstheticsBreadcrumbs(e){e.push({label:"Estética",link:"../../servicios/estetica/index.html"});const t={"spa-facial-integral":"Spa Facial Integral","limpieza-facial":"Limpieza Facial","masajes-relajantes":"Masajes Relajantes","cejas-y-pestanas":"Cejas y Pestañas"};this.pageKey&&t[this.pageKey]&&e.push({label:t[this.pageKey],link:"#"})}}document.addEventListener("DOMContentLoaded",()=>{new ServicePageManager});