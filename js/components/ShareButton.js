export class ShareButton{constructor(){this.init()}init(){document.querySelectorAll(".share-button-container").forEach(t=>this.mountButton(t))}mountButton(t){const e={url:t.dataset.url||window.location.href,title:t.dataset.title||document.title,text:t.dataset.text||"¡Mira este artículo!"},a=this.createButtonElement(e.title);a.addEventListener("click",()=>this.handleShare(a,e)),t.innerHTML="",t.appendChild(a)}createButtonElement(t){const e=document.createElement("button");return e.className="group inline-flex items-center gap-2 px-6 py-3 bg-brand-green hover:bg-brand-gray-dark text-white rounded-full transition-all duration-300 shadow-md hover:shadow-lg font-bold text-sm cursor-pointer transform hover:-translate-y-1",e.title=`Compartir: ${t}`,e.innerHTML='\n            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 transition-transform group-hover:scale-110" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z" />\n            </svg>\n            <span class="font-sans">Compartir Artículo</span>\n        ',e}async handleShare(t,e){if(navigator.share)try{await navigator.share(e)}catch(a){"AbortError"!==a.name&&(console.warn("Web Share API falló, usando clipboard...",a),await this.copyToClipboard(t,e.url))}else await this.copyToClipboard(t,e.url)}async copyToClipboard(t,e){const a=t.querySelector("span"),r=a.textContent;try{await navigator.clipboard.writeText(e),this.showFeedback(t,a,"¡Enlace Copiado!"),setTimeout(()=>this.resetFeedback(t,a,r),2e3)}catch(t){console.error("Error al copiar:",t),alert("No pudimos copiar el enlace. Por favor hazlo manualmente.")}}showFeedback(t,e,a){e.textContent=a,t.classList.add("bg-brand-medium")}resetFeedback(t,e,a){e.textContent=a,t.classList.remove("bg-brand-medium")}}