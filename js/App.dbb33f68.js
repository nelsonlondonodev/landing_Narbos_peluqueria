import{siteConfig,BASE_PATH,resolveAsset}from"./config.js";import{UIService}from"./services/UIService.js";import{getNavbarHTML}from"./components/Navbar.js";import{getFooterHTML}from"./components/Footer.js";import{getContactFormHTML}from"./components/ContactForm.js";import{getHeroHTML}from"./components/HeroSection.js";import{getHomeModalsHTML}from"./components/HomeModals.js";import{MobileMenu}from"./components/MobileMenu.js";import{WhatsAppButton}from"./components/WhatsAppButton.js";import{FAQAccordion}from"./components/FAQAccordion.js";import{ReviewsCarousel}from"./components/ReviewsCarousel.js";import{ShareButton}from"./components/ShareButton.js";import{FloatingDecorations}from"./components/FloatingDecorations.js";import{ServiceCard}from"./components/ServiceCard.js";import{BrandsSection}from"./components/BrandsSection.js";import{allBrands}from"./data/brandsData.js";import{ContactFormController}from"./controllers/ContactFormController.js";import{HeaderController}from"./controllers/HeaderController.js";import{ModalController}from"./controllers/ModalController.js";import{VideoPlayerController}from"./controllers/VideoPlayerController.js";import{GalleryController}from"./controllers/GalleryController.js";import{PageTransitionController}from"./controllers/PageTransitionController.js";import{servicesData}from"./data/servicesData.js";import{pagesData}from"./data/pagesData.js";import{Breadcrumbs}from"./components/Breadcrumbs.js";class App{constructor(){this.appRoot=window.location.origin+BASE_PATH+"/";const o=window.location.pathname.replace(BASE_PATH,"/").replace("//","/");this.isHomePage="/"===o||"/index.html"===o||""===o}resolvePath(o){return resolveAsset(o)}init(){this.mountLayout(),this.mountHero(),this.isHomePage&&this.mountHomeModals(),this.initCoreComponents(),this.initInteractiveComponents(),this.mountHomeServices(),this.initServices(),this.initBreadcrumbs()}resolvePath(o){if(!o)return"#";if(o.startsWith("http"))return o;const e=o.startsWith("/")?o.slice(1):o;return new URL(e,this.appRoot).href}mountLayout(){const o=document.getElementById("navbar-root"),e=document.getElementById("footer-root"),t=document.getElementById("contact-root");o&&(o.innerHTML=getNavbarHTML(this.appRoot,this.isHomePage)),e&&(e.innerHTML=getFooterHTML(this.appRoot)),t&&(t.innerHTML=getContactFormHTML())}mountHomeModals(){const o=document.getElementById("modals-root");o&&(o.innerHTML=getHomeModalsHTML())}mountHero(){const o=document.getElementById("hero-root");if(!o)return;const e=window.location.pathname;let t=null;if(e.includes("nosotros.html")?t="nosotros":e.includes("peluqueria")?t="peluqueria":e.includes("barberia")?t="barberia":e.includes("contacto.html")&&(t="contacto"),t&&pagesData[t]&&pagesData[t].hero){const e=pagesData[t].hero,r=this.resolvePath(e.imageSrc);o.innerHTML=getHeroHTML({...e,imageSrc:r})}}initCoreComponents(){new MobileMenu,new WhatsAppButton,new HeaderController,new PageTransitionController}initInteractiveComponents(){new FAQAccordion("#faq"),new ReviewsCarousel,new ContactFormController,new ShareButton,this.isHomePage&&new ModalController,new VideoPlayerController,new GalleryController,new BrandsSection("home-brands-root",allBrands).render(),new FloatingDecorations({basePath:this.appRoot})}mountHomeServices(){const o=document.getElementById("services-grid");o&&servicesData&&(o.innerHTML="",servicesData.forEach(e=>{const t={...e,link:this.resolvePath(e.link),image:this.resolvePath(e.image)},r=new ServiceCard(t);o.appendChild(r.render())}))}initServices(){new UIService}initBreadcrumbs(){const o=document.getElementById("breadcrumbs-root");if(!o)return;if(window.location.pathname.includes("/blog/articles/")){const e=[{label:"Inicio",link:this.resolvePath("index.html")},{label:"Blog",link:this.resolvePath("blog/index.html")}],t=document.querySelector("h1");if(t){let o=t.textContent.replace(/\s+/g," ").trim();if(window.innerWidth<768){const e=o.split(/\s+/);e.length>3&&(o=e.slice(0,3).join(" ")+"...")}else o.length>40&&(o=o.substring(0,40)+"...");o&&e.push({label:o,link:"#"})}o.innerHTML=new Breadcrumbs(e).render()}}}export{App};